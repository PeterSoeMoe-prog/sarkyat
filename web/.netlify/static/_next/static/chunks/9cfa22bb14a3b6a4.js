(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52,e=>{"use strict";var t,n,s,i,a,r,o,l,c,d,u,h,m,p,f,x,g,b,y,w,N,v,E,C,S=e.i(43476),T=e.i(22016),_=e.i(88653),j=e.i(46932),O=e.i(71645),A=e.i(18566),I=e.i(73884),R=e.i(91499),F=e.i(9257),k=e.i(97466);(t=m||(m={})).STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object",(n=p||(p={})).LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python",(s=f||(f={})).OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";let M=["user","model","function","system"];(i=x||(x={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(a=g||(g={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE",(r=b||(b={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH",(o=y||(y={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",(l=w||(w={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.SPII="SPII",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.OTHER="OTHER",(c=N||(N={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",c.RETRIEVAL_QUERY="RETRIEVAL_QUERY",c.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",c.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",c.CLASSIFICATION="CLASSIFICATION",c.CLUSTERING="CLUSTERING",(d=v||(v={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",d.AUTO="AUTO",d.ANY="ANY",d.NONE="NONE",(u=E||(E={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",u.MODE_DYNAMIC="MODE_DYNAMIC";class D extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class $ extends D{constructor(e,t){super(e),this.response=t}}class L extends D{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class B extends D{}class U extends D{}(h=C||(C={})).GENERATE_CONTENT="generateContent",h.STREAM_GENERATE_CONTENT="streamGenerateContent",h.COUNT_TOKENS="countTokens",h.EMBED_CONTENT="embedContent",h.BATCH_EMBED_CONTENTS="batchEmbedContents";class P{constructor(e,t,n,s,i){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=i}toString(){var e,t;let n=(null==(e=this.requestOptions)?void 0:e.apiVersion)||"v1beta",s=(null==(t=this.requestOptions)?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",i=`${s}/${n}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}async function G(e){var t,n;let s,i=new Headers;i.append("Content-Type","application/json"),i.append("x-goog-api-client",(n=e.requestOptions,s=[],(null==n?void 0:n.apiClient)&&s.push(n.apiClient),s.push("genai-js/0.24.1"),s.join(" "))),i.append("x-goog-api-key",e.apiKey);let a=null==(t=e.requestOptions)?void 0:t.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(e){throw new B(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${e.message}`)}for(let[e,t]of a.entries()){if("x-goog-api-key"===e)throw new B(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new B(`Header name ${e} can only be set using the apiClient field`);i.append(e,t)}}return i}async function H(e,t,n,s,i,a){let r=new P(e,t,n,s,a);return{url:r.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}(a)),{method:"POST",headers:await G(r),body:i})}}async function K(e,t,n,s,i,a={},r=fetch){let{url:o,fetchOptions:l}=await H(e,t,n,s,i,a);return Y(o,l,r)}async function Y(e,t,n=fetch){let s;try{s=await n(e,t)}catch(n){var i=n,a=e;let t=i;throw"AbortError"===t.name?(t=new U(`Request aborted when fetching ${a.toString()}: ${i.message}`)).stack=i.stack:i instanceof L||i instanceof B||((t=new D(`Error fetching from ${a.toString()}: ${i.message}`)).stack=i.stack),t}return s.ok||await q(s,e),s}async function q(e,t){let n,s="";try{let t=await e.json();s=t.error.message,t.error.details&&(s+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(e){}throw new L(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${s}`,e.status,e.statusText,n)}function V(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),W(e.candidates[0]))throw new $(`${X(e)}`,e);return function(e){var t,n,s,i;let a=[];if(null==(n=null==(t=e.candidates)?void 0:t[0].content)?void 0:n.parts)for(let t of null==(i=null==(s=e.candidates)?void 0:s[0].content)?void 0:i.parts)t.text&&a.push(t.text),t.executableCode&&a.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&a.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}(e)}if(e.promptFeedback)throw new $(`Text not available. ${X(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),W(e.candidates[0]))throw new $(`${X(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),z(e)[0]}if(e.promptFeedback)throw new $(`Function call not available. ${X(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),W(e.candidates[0]))throw new $(`${X(e)}`,e);return z(e)}if(e.promptFeedback)throw new $(`Function call not available. ${X(e)}`,e)},e}function z(e){var t,n,s,i;let a=[];if(null==(n=null==(t=e.candidates)?void 0:t[0].content)?void 0:n.parts)for(let t of null==(i=null==(s=e.candidates)?void 0:s[0].content)?void 0:i.parts)t.functionCall&&a.push(t.functionCall);return a.length>0?a:void 0}let J=[w.RECITATION,w.SAFETY,w.LANGUAGE];function W(e){return!!e.finishReason&&J.includes(e.finishReason)}function X(e){var t,n,s;let i="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)i+="Response was blocked",(null==(t=e.promptFeedback)?void 0:t.blockReason)&&(i+=` due to ${e.promptFeedback.blockReason}`),(null==(n=e.promptFeedback)?void 0:n.blockReasonMessage)&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null==(s=e.candidates)?void 0:s[0]){let t=e.candidates[0];W(t)&&(i+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(i+=`: ${t.finishMessage}`))}return i}function Q(e){return this instanceof Q?(this.v=e,this):new Q(e)}"function"==typeof SuppressedError&&SuppressedError;let Z=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function ee(e){let t=[],n=e.getReader();for(;;){let{done:e,value:s}=await n.read();if(e)return V(function(e){let t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let s of t.candidates)if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:e}),n.candidates[e].citationMetadata=s.citationMetadata,n.candidates[e].groundingMetadata=s.groundingMetadata,n.candidates[e].finishReason=s.finishReason,n.candidates[e].finishMessage=s.finishMessage,n.candidates[e].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[e].content||(n.candidates[e].content={role:s.content.role||"user",parts:[]});let t={};for(let i of s.content.parts)i.text&&(t.text=i.text),i.functionCall&&(t.functionCall=i.functionCall),i.executableCode&&(t.executableCode=i.executableCode),i.codeExecutionResult&&(t.codeExecutionResult=i.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),n.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(n.usageMetadata=t.usageMetadata)}return n}(t));t.push(s)}}async function et(e,t,n,s){return function(e){let t,[n,s]=(t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})).getReader(),new ReadableStream({start(e){let n="";return function s(){return t.read().then(({value:t,done:i})=>{let a;if(i)return n.trim()?void e.error(new D("Failed to parse stream")):void e.close();let r=(n+=t).match(Z);for(;r;){try{a=JSON.parse(r[1])}catch(t){e.error(new D(`Error parsing JSON response: "${r[1]}"`));return}e.enqueue(a),r=(n=n.substring(r[0].length)).match(Z)}return s()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new U("Request aborted when reading from the stream"):new D("Error reading from the stream")})}()}})).tee();return{stream:function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var s,i=n.apply(e,t||[]),a=[];return s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(e){i[e]&&(s[e]=function(t){return new Promise(function(n,s){a.push([e,t,n,s])>1||o(e,t)})})}function o(e,t){try{var n;(n=i[e](t)).value instanceof Q?Promise.resolve(n.value.v).then(l,c):d(a[0][2],n)}catch(e){d(a[0][3],e)}}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:n}=yield Q(t.read());if(n)break;yield yield Q(V(e))}})}(n),response:ee(s)}}(await K(t,C.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),s))}async function en(e,t,n,s){let i=await K(t,C.GENERATE_CONTENT,e,!1,JSON.stringify(n),s);return{response:V(await i.json())}}function es(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)if(!e.role)return{role:"system",parts:e.parts};else return e}}function ei(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let n of e)"string"==typeof n?t.push({text:n}):t.push(n);var n=t;let s={role:"user",parts:[]},i={role:"function",parts:[]},a=!1,r=!1;for(let e of n)"functionResponse"in e?(i.parts.push(e),r=!0):(s.parts.push(e),a=!0);if(a&&r)throw new D("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!r)throw new D("No content is provided for sending chat message.");return a?s:i}function ea(e){let t;return t=e.contents?e:{contents:[ei(e)]},e.systemInstruction&&(t.systemInstruction=es(e.systemInstruction)),t}let er=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],eo={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function el(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;let n=null==(t=e.candidates[0])?void 0:t.content;if(void 0===n||void 0===n.parts||0===n.parts.length)return!1;for(let e of n.parts)if(void 0===e||0===Object.keys(e).length||void 0!==e.text&&""===e.text)return!1;return!0}let ec="SILENT_ERROR";class ed{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(!function(e){let t=!1;for(let n of e){let{role:e,parts:s}=n;if(!t&&"user"!==e)throw new D(`First content should be with role 'user', got ${e}`);if(!M.includes(e))throw new D(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(M)}`);if(!Array.isArray(s))throw new D("Content should have 'parts' property with an array of Parts");if(0===s.length)throw new D("Each Content should have at least one part");let i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of s)for(let t of er)t in e&&(i[t]+=1);let a=eo[e];for(let t of er)if(!a.includes(t)&&i[t]>0)throw new D(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,i,a,r,o;let l;await this._sendPromise;let c=ei(e),d={safetySettings:null==(n=this.params)?void 0:n.safetySettings,generationConfig:null==(s=this.params)?void 0:s.generationConfig,tools:null==(i=this.params)?void 0:i.tools,toolConfig:null==(a=this.params)?void 0:a.toolConfig,systemInstruction:null==(r=this.params)?void 0:r.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,c]},u=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>en(this._apiKey,this.model,d,u)).then(e=>{var t;if(el(e.response)){this._history.push(c);let n=Object.assign({parts:[],role:"model"},null==(t=e.response.candidates)?void 0:t[0].content);this._history.push(n)}else{let t=X(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,l}async sendMessageStream(e,t={}){var n,s,i,a,r,o;await this._sendPromise;let l=ei(e),c={safetySettings:null==(n=this.params)?void 0:n.safetySettings,generationConfig:null==(s=this.params)?void 0:s.generationConfig,tools:null==(i=this.params)?void 0:i.tools,toolConfig:null==(a=this.params)?void 0:a.toolConfig,systemInstruction:null==(r=this.params)?void 0:r.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t),u=et(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then(()=>u).catch(e=>{throw Error(ec)}).then(e=>e.response).then(e=>{if(el(e)){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=X(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==ec&&console.error(e)}),u}}async function eu(e,t,n,s){return(await K(t,C.COUNT_TOKENS,e,!1,JSON.stringify(n),s)).json()}async function eh(e,t,n,s){return(await K(t,C.EMBED_CONTENT,e,!1,JSON.stringify(n),s)).json()}async function em(e,t,n,s){let i=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await K(t,C.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),s)).json()}class ep{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=es(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;let s=ea(e),i=Object.assign(Object.assign({},this._requestOptions),t);return en(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(n=this.cachedContent)?void 0:n.name},s),i)}async generateContentStream(e,t={}){var n;let s=ea(e),i=Object.assign(Object.assign({},this._requestOptions),t);return et(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(n=this.cachedContent)?void 0:n.name},s),i)}startChat(e){var t;return new ed(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(t=this.cachedContent)?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let n=function(e,t){var n;let s={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null==(n=null==t?void 0:t.cachedContent)?void 0:n.name,contents:[]},i=null!=e.generateContentRequest;if(e.contents){if(i)throw new B("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=e.contents}else if(i)s=Object.assign(Object.assign({},s),e.generateContentRequest);else{let t=ei(e);s.contents=[t]}return{generateContentRequest:s}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return eu(this.apiKey,this.model,n,s)}async embedContent(e,t={}){let n="string"==typeof e||Array.isArray(e)?{content:ei(e)}:e,s=Object.assign(Object.assign({},this._requestOptions),t);return eh(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){let n=Object.assign(Object.assign({},this._requestOptions),t);return em(this.apiKey,this.model,e,n)}}class ef{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new D("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ep(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new B("Cached content must contain a `name` field.");if(!e.model)throw new B("Cached content must contain a `model` field.");for(let n of["model","systemInstruction"])if((null==t?void 0:t[n])&&e[n]&&(null==t?void 0:t[n])!==e[n]){if("model"===n&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new B(`Different value for "${n}" specified in modelParams (${t[n]}) and cachedContent (${e[n]})`)}let s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new ep(this.apiKey,s,n)}}async function ex(e){try{let t=`https://generativelanguage.googleapis.com/v1beta/models?key=${encodeURIComponent(e)}`,n=await fetch(t,{method:"GET"});if(!n.ok)return`ListModels failed: ${n.status} ${n.statusText}`;let s=await n.json(),i=(Array.isArray(s?.models)?s.models:[]).map(e=>{let t=String(e?.name??""),n=Array.isArray(e?.supportedGenerationMethods)?e.supportedGenerationMethods.map(e=>String(e)):[];return{name:t,methods:n}}).filter(e=>e.name.length>0).filter(e=>e.methods.includes("generateContent")),a=i.slice(0,20),r=a.map(e=>`- ${e.name} (${e.methods.join(",")})`),o=i.length>a.length?`
â€¦ +${i.length-a.length} more`:"";return`Available models (first ${a.length}/${i.length} supporting generateContent):
${r.join("\n")}${o}`}catch(e){return`ListModels failed: ${e?.message?String(e.message):"unknown error"}`}}async function eg(e,t,n){let s=(e??"").trim();if(!s)throw Error("Missing API key");let i=new ef(s).getGenerativeModel({model:"gemini-flash-latest"}),a=`You must respond in Burmese (Myanmar) language and follow the STRICT output format below.
Output MUST be plain text only (no markdown, no bullets other than the exact lines requested).

STRICT FORMAT (copy this structure exactly):

á€…á€¬á€œá€¯á€¶á€¸ (á€¡á€“á€­á€•á€¹á€•á€¬á€šá€º)

á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶ - á€—á€»á€Šá€ºá€¸ [Thai] + á€á€› [Thai] + á€¡á€á€á€º [Thai] (Tone - Burmese explanation)

á€á€«á€€á€» - [Thai Sentence] ([Burmese Translation])
á€á€«á€€á€» - [Thai Sentence] ([Burmese Translation])
á€á€«á€€á€» - [Thai Sentence] ([Burmese Translation])
á€á€«á€€á€» - [Thai Sentence] ([Burmese Translation])

TARGET WORD:
Thai word: ${(t??"").trim()||"(empty)"}
`+(n?`Known Burmese meaning: ${(n??"").trim()}
`:"")+`
`+`IMPORTANT RULES:
`+`1) In the structure line (á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶), you MUST write Thai consonants/vowels/final markers in Thai script inside [brackets].
`+`   - Do NOT replace Thai letters with Burmese character names.
`+`   - You MAY add Burmese pronunciation in parentheses AFTER the Thai script, e.g. [à¸¡ (à¸¡à¸­ - á€™á€±á€¬)].
`+`2) Structure line must match exactly:
`+`   á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶ - á€—á€»á€Šá€ºá€¸ [<Thai consonant(s)>] + á€á€› [<Thai vowel(s)>] + á€¡á€á€á€º [<Thai final/marker or none>] (Tone - <Burmese explanation>)
`+`3) Provide exactly 4 example sentence lines. Each line MUST match exactly:
`+`   á€á€«á€€á€» - <Thai Sentence> (<Burmese Translation>)
`+`4) No extra sections, no extra commentary.
`;try{let e=await i.generateContent(a),t=e?.response?.text?.()??"",n=String(t??"").trim();if(!n)throw Error("Empty response");return n}catch(t){let e=t?.message?String(t.message):"AI request failed";if(e.includes("[429")||e.includes(" 429 ")||e.includes("429")){let t=function(e){let t=e.match(/retry\s+in\s+([0-9.]+)s/i);if(t?.[1]){let e=Number(t[1]);if(Number.isFinite(e)&&e>0)return e}let n=e.match(/retryDelay"\s*:\s*"(\d+)s"/i);if(n?.[1]){let e=Number(n[1]);if(Number.isFinite(e)&&e>0)return e}let s=e.match(/retryDelay\s*:?\s*(\d+)s/i);if(s?.[1]){let e=Number(s[1]);if(Number.isFinite(e)&&e>0)return e}return null}(e);if(null!=t)throw Error(`RATE_LIMIT: retry_after=${Math.ceil(t)}s`);throw Error("RATE_LIMIT: quota_exceeded")}if(e.includes("[404")||e.includes(" 404 ")||e.includes("404")){let t=await ex(s);throw Error(`${e}

${t}`)}throw Error(e)}}var eb=e.i(67426);e.i(36180);var ey=e.i(98925);function ew(){let e=(0,A.useRouter)(),t=(0,R.useTapSound)(),{addHits:n}=(0,F.useStudyHistory)(),s="sar-kyat-sound-level",i="sar-kyat-tap-tts-mode",a="sar-kyat-ai-rate-limit-until",r="rounded-full bg-[var(--surface)]/50 px-4 py-2 text-[13px] font-semibold text-[color:var(--foreground)] backdrop-blur-xl border border-[color:var(--border)] shadow-sm hover:shadow-md transition-shadow",{uid:o,isAnonymous:l,items:c,loading:d}=(0,I.useVocabulary)(),u=!!o&&!l,h=(0,A.useSearchParams)().get("id"),m=(0,O.useMemo)(()=>u&&0!==c.length?h?c.find(e=>e.id===h)??null:c[0]??null:null,[u,c,h]),[p,f]=(0,O.useState)(!1),[x,g]=(0,O.useState)(""),[b,y]=(0,O.useState)(""),[w,N]=(0,O.useState)(0),[v,E]=(0,O.useState)("learning"),[C,M]=(0,O.useState)("");(0,O.useEffect)(()=>{m&&p&&(g(m.thai?.toString()||""),y(m.burmese?.toString()||""),N(Number.isFinite(Number(m.count))?Number(m.count):0),E(m.status?.toString()||"learning"),M(m.category?.toString()||""))},[m,p]);let D=async()=>{if(o&&m?.id){Y(!0);try{let e=(0,eb.getFirebaseDb)(),t=(0,ey.doc)(e,"users",o,"vocabulary",m.id);await (0,ey.updateDoc)(t,{thai:x,burmese:b,count:w,status:v,category:C,updatedAt:(0,ey.serverTimestamp)()}),f(!1)}catch(e){console.error("Error saving edits:",e)}finally{Y(!1)}}};(0,O.useEffect)(()=>{if(m?.id)try{localStorage.setItem("sar-kyat-last-active-vocab-id",m.id)}catch{}},[m?.id]);let $=(m?.category?.toString().trim()||"Uncategorized").trim(),L=m?.thai?.toString()||"",B=m?.burmese?.toString()||"";Number.isFinite(Number(m?.count))&&m?.count;let U=(m?.status?.toString()||"").trim(),P=Array.from(L.trim()).length,[G,H]=(0,O.useState)(null),[K,Y]=(0,O.useState)(!1),[q,V]=(0,O.useState)(5),[z,J]=(0,O.useState)(null),[W,X]=(0,O.useState)(0);(0,O.useEffect)(()=>{m&&X(Number.isFinite(Number(m.count))?Number(m.count):0)},[m]);let[Q,Z]=(0,O.useState)(!1),[ee,et]=(0,O.useState)(1),[en,es]=(0,O.useState)(!1),[ei,ea]=(0,O.useState)(null),[er,eo]=(0,O.useState)(null),[el,ec]=(0,O.useState)(null),[ed,eu]=(0,O.useState)(null),[eh,em]=(0,O.useState)(!1),ep=(0,O.useRef)(null),[ef,ex]=(0,O.useState)(null),[ew,eN]=(0,O.useState)(!1),ev=(0,O.useRef)(null),[eE,eC]=(0,O.useState)("off"),eS=(0,O.useRef)(0),[eT,e_]=(0,O.useState)(!1),[ej,eO]=(0,O.useState)(!1),eA=(0,O.useRef)(null),[eI,eR]=(0,O.useState)(!1),eF=(0,O.useRef)(null),[ek,eM]=(0,O.useState)(0),[eD,e$]=(0,O.useState)([]),eL=(0,O.useRef)(0),eB=(0,O.useRef)(null),[eU,eP]=(0,O.useState)(null),[eG,eH]=(0,O.useState)(0),[eK,eY]=(0,O.useState)(0),eq=(0,O.useRef)(null),eV=(0,O.useRef)(null);(0,O.useEffect)(()=>{try{let e=localStorage.getItem(s);("0"===e||"1"===e||"2"===e)&&et(Number(e))}catch{}},[]),(0,O.useEffect)(()=>{try{let e=(localStorage.getItem(i)??"").trim();("max"===e||"3"===e||"10"===e||"off"===e)&&eC(e)}catch{}},[]),(0,O.useEffect)(()=>{eS.current=0},[m?.id]),(0,O.useEffect)(()=>()=>{null!=eA.current&&window.clearTimeout(eA.current),null!=eF.current&&window.clearTimeout(eF.current),null!=eB.current&&window.clearTimeout(eB.current),null!=eV.current&&window.clearTimeout(eV.current)},[]);let ez=()=>{if(!u||!o||!m||Q)return;eZ();let e=Date.now();eY(t=>{let n=eq.current??0;return eq.current=e,e-n<800?(t||0)+1:1}),eP(`+${q}`),eH(e=>e+1),null!=eV.current&&window.clearTimeout(eV.current),eV.current=window.setTimeout(()=>{eY(0),eP(null)},1400),(()=>{if(!L.trim())return;let e=["#60A5FA","#49D2FF","#2CE08B","#FFB020","#FF4D6D","#B36BFF"],t=[];for(let n=0;n<18;n++){let s=2*Math.PI*n/18+(Math.random()-.5)*.6,i=80+80*Math.random();t.push({id:eL.current++,x:Math.cos(s)*i,y:Math.sin(s)*i,color:e[n%e.length]})}e$(t),null!=eB.current&&window.clearTimeout(eB.current),eB.current=window.setTimeout(()=>{e$([])},700)})(),eM(e=>e+1);try{"vibrate"in navigator&&navigator.vibrate(10)}catch{}if("off"===eE||0===ee)return;let t="max"===eE?1:"3"===eE?3:10;eS.current%t==0&&e4(L,m?.id?`main-${m.id}-${eS.current}`:"main")},eJ="3"===eE?"3":"10"===eE?"10":null;(0,O.useEffect)(()=>{J(null),Z(!1),es(!1),ea(null),eo(null),ec(null),eu(null),em(!1),ex(null),eN(!1)},[m?.id]),(0,O.useEffect)(()=>{null!=z&&W===z&&J(null)},[z]);let eW=G??U,eX=z??W,eQ=async()=>{if(!u||!o||!m||K)return;let e=(m.status??"queue").toString(),t="drill"===e?"queue":"queue"===e?"ready":"drill";H(t),Y(!0);try{await (0,k.upsertVocabulary)(o,{...m,status:t})}finally{Y(!1),H(null)}},eZ=async()=>{if(!u||!o||!m||Q)return;let e=(Number.isFinite(Number(m.count))?Number(m.count):0)+q;J(e),Z(!0);try{await (0,k.upsertVocabulary)(o,{...m,count:e}),n(q)}finally{Z(!1)}},e0=async e=>{if(u&&o&&m){Z(!0);try{await (0,k.upsertVocabulary)(o,{...m,count:e})}finally{Z(!1)}}},e1=(0,O.useMemo)(()=>{if(!u||!m)return{notReady:0,total:0};let e=c.filter(e=>(e.category?.toString().trim()||"Uncategorized").trim()===$),t=e.length;return{notReady:e.filter(e=>"ready"!==e.status).length,total:t}},[u,c,m,$]),e2=(0,O.useMemo)(()=>{let e=new Set;return c.forEach(t=>{let n=(t.category?.toString().trim()||"Uncategorized").trim();e.add(n)}),Array.from(e).sort()},[c]),e5=["#49D2FF","#B36BFF","#FF4D6D","#FFB000","#22C55E","#60A5FA"],e4=async(e,t)=>{let n=String(e??"").trim();if(!n||!u||0===ee||ew)return;let s=t??n;ex(s),eN(!0);try{let e=(0,eb.getFirebaseAuth)(),t=await e.currentUser?.getIdToken();if(!t)throw Error("Not signed in");try{ep.current?.pause()}catch{}ep.current=null;let s=await fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({text:n})});if(!s.ok){let e=await s.text();throw Error(`${s.status} ${s.statusText}${e?`: ${e}`:""}`)}let i=await s.arrayBuffer(),a=new Blob([i],{type:"audio/mpeg"}),r=URL.createObjectURL(a),o=new Audio(r);o.volume=2===ee?1:.65,ep.current=o,o.onended=()=>{try{URL.revokeObjectURL(r)}catch{}},await o.play()}catch{}finally{setTimeout(()=>ex(e=>e===s?null:e),160),eN(!1)}},e6=e=>{let t=String(e??"").split(/\r?\n/).map(e=>e.trim()).filter(e=>e.length>0);return(0,S.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>((e,t)=>{let n=String(e??"");if(!n)return null;if(n.startsWith("á€á€«á€€á€» -")){let e=n.slice(6).trim(),s=e.indexOf(" ("),i=(s>=0?e.slice(0,s):e).trim(),a=s>=0?e.slice(s).trim():"";return(0,S.jsxs)("div",{className:"text-[13px] leading-6 font-semibold text-white/80",children:[(0,S.jsx)("span",{className:"text-white/80",children:"á€á€«á€€á€» - "}),(0,S.jsx)("button",{type:"button",onClick:()=>void e4(i,`${t}-thai`),disabled:!u||ew,className:"bg-transparent text-inherit text-left transition-opacity "+(ef===`${t}-thai`?"opacity-70":"opacity-100"),children:i}),a?(0,S.jsxs)("span",{className:"text-white/70",children:[" ",a]}):null]},t)}if(n.startsWith("á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶ -")){let e,s=[],i=/\[([^\]]+)\]/g,a=0;for(;null!==(e=i.exec(n));){let i=n.slice(a,e.index);i&&s.push((0,S.jsx)("span",{children:i},`${t}-b-${a}`));let r=String(e[1]??""),o=(r.match(/[\u0E00-\u0E7F]+/g)??[]).join("").trim()||r.trim(),l=`${t}-br-${e.index}`;s.push((0,S.jsxs)("button",{type:"button",onClick:()=>void e4(o,l),disabled:!u||ew,className:"bg-transparent text-inherit text-left transition-opacity "+(ef===l?"opacity-70":"opacity-100"),children:["[",r,"]"]},l)),a=e.index+e[0].length}let r=n.slice(a);return r&&s.push((0,S.jsx)("span",{children:r},`${t}-a-${a}`)),(0,S.jsx)("div",{className:"text-[13px] leading-6 font-semibold text-white/80",children:s},t)}let s=n.match(/[\u0E00-\u0E7F]+/);if(s?.index!=null){let e=s.index,i=s[0],a=n.slice(0,e),r=n.slice(e+i.length),o=`${t}-thaiword`;return(0,S.jsxs)("div",{className:"text-[13px] leading-6 font-semibold text-white/80",children:[a?(0,S.jsx)("span",{children:a}):null,(0,S.jsx)("button",{type:"button",onClick:()=>void e4(i,o),disabled:!u||ew,className:"bg-transparent text-inherit text-left transition-opacity "+(ef===o?"opacity-70":"opacity-100"),children:i}),r?(0,S.jsx)("span",{children:r}):null]},t)}return(0,S.jsx)("div",{className:"text-[13px] leading-6 font-semibold text-white/80",children:n},t)})(e,`ai-${t}`))})},e3=async()=>{if(!u||!o||!m||m.ai_explanation&&String(m.ai_explanation).trim().length>0||ed===m.id||en||eh||el===m.id&&(er||ei))return;let e=(()=>{try{let e=(localStorage.getItem(a)??"").trim(),t=Number(e);return Number.isFinite(t)?t:0}catch{return 0}})(),t=Date.now();if(e>t){let n=Math.max(1,Math.ceil((e-t)/1e3));ea(`á€šá€”á€±á€· Limit á€•á€¼á€Šá€ºá€·á€á€½á€¬á€¸á€•á€«á ${n} á€…á€€á€¹á€€á€”á€·á€ºá€™á€¾ á€•á€¼á€”á€ºá€€á€¼á€Šá€·á€ºá€•á€±á€¸á€•á€«á‹`),ec(m.id);return}let n=(()=>{try{return(localStorage.getItem("sar-kyat-google-ai-api-key")??"").trim()}catch{return""}})();if(!n){ea("Missing API key. Add it in Settings."),eo(null),ec(m.id);return}es(!0),ea(null),eo(null),ec(m.id);try{let e=await eg(n,L,B);eo(e)}catch(t){let e=(t?.message?String(t.message):"AI request failed").trim();if(e.startsWith("RATE_LIMIT:")){let t=e.match(/retry_after=(\d+)s/i),n=t?.[1]?Number(t[1]):null,i=n&&Number.isFinite(n)?Math.max(1,n):60;var s=Date.now()+1e3*i;try{localStorage.setItem(a,String(s))}catch{}ea(`á€šá€”á€±á€· Limit á€•á€¼á€Šá€ºá€·á€á€½á€¬á€¸á€•á€«á ${i} á€…á€€á€¹á€€á€”á€·á€ºá€™á€¾ á€•á€¼á€”á€ºá€€á€¼á€Šá€·á€ºá€•á€±á€¸á€•á€«á‹`)}else ea(e)}finally{es(!1)}},e8=async()=>{if(u&&o&&m&&er&&er.trim().length&&!eh){em(!0);try{await (0,k.upsertVocabulary)(o,{...m,ai_explanation:er.trim()}),eo(null),ea(null)}catch(e){ea((e?.message?String(e.message):"Save failed").trim())}finally{em(!1)}}};(0,O.useEffect)(()=>{e3()},[m?.id,u]),(0,O.useEffect)(()=>{m?.id&&L.trim()&&u&&0!==ee&&ev.current!==m.id&&(ev.current=m.id,e4(L,`main-${m.id}`))},[m?.id,u,ee]);let e9=m?.ai_explanation||m?.id&&ed!==m.id&&(en||ei||er);return(0,S.jsx)("div",{className:"min-h-screen bg-[#0A0B0F] text-white",children:(0,S.jsx)("div",{className:"min-h-screen",children:(0,S.jsx)("div",{className:"mx-auto w-full max-w-md px-4 pt-4 pb-4 min-h-[100dvh] flex flex-col",children:(0,S.jsxs)("div",{className:"origin-top flex-1 min-h-0 flex flex-col",children:[(0,S.jsxs)("header",{className:"grid grid-cols-3 items-center",children:[(0,S.jsx)("div",{className:"justify-self-start",children:(0,S.jsxs)("button",{type:"button",disabled:!u||!m,onClick:()=>{u&&m&&e.push(`/category?cat=${encodeURIComponent($)}&from=counter&id=${encodeURIComponent(m.id)}`)},className:"text-[16px] font-semibold text-white/85 "+(u&&m?"opacity-100":"opacity-60"),children:[$," ",u?(0,S.jsxs)("span",{className:"text-white/70",children:["(",e1.notReady,"/",Math.max(1,e1.total),")"]}):null]})}),(0,S.jsx)("div",{className:"justify-self-center",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("button",{type:"button",onClick:()=>{t(),(()=>{let e=L.trim();if(!e)return;let t=`https://www.google.com/search?tbm=isch&q=${encodeURIComponent(e)}`;window.open(t,"_blank","noopener,noreferrer")})()},className:"h-[34px] w-[34px] rounded-full border-2 border-white/80 bg-[#2CE08B] shadow-[0_12px_40px_rgba(0,255,160,0.25)] flex items-center justify-center text-[12px] font-semibold focus:outline-none active:scale-95 transition-transform","aria-label":"Open Google Images",children:"G"}),(0,S.jsx)("button",{type:"button",onClick:()=>{t(),(()=>{let e=L.trim();if(!e)return;let t=`https://translate.google.com/?sl=th&tl=my&text=${encodeURIComponent(e)}&op=translate`;window.open(t,"_blank","noopener,noreferrer")})()},className:"h-[34px] w-[34px] rounded-full border-2 border-white/80 bg-[#FF4D94] shadow-[0_12px_40px_rgba(255,70,160,0.25)] flex items-center justify-center text-[12px] font-semibold focus:outline-none active:scale-95 transition-transform","aria-label":"Open Google Translate",children:"T"})]})}),(0,S.jsxs)("div",{className:"justify-self-end flex items-center gap-3",children:[(0,S.jsx)("button",{onClick:()=>{t(),f(!p)},className:"text-[16px] font-semibold text-[#4FD2FF] active:opacity-60",children:p?"Cancel":"Edit"}),!p&&(0,S.jsx)(T.default,{href:"/",onClick:()=>t(),className:"text-[20px] font-medium text-white/60 hover:text-white active:opacity-60",children:"âœ•"})]})]}),(0,S.jsx)(j.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.18},className:"mt-4 flex-1 flex flex-col",children:u?d?(0,S.jsx)("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-[13px] font-semibold text-white/70 backdrop-blur-xl",children:"Loadingâ€¦"}):p?(0,S.jsx)("div",{className:"flex-1 flex flex-col gap-4 mt-2",children:(0,S.jsxs)("div",{className:"space-y-4 px-2 overflow-y-auto pb-4",children:[(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("label",{className:"text-[11px] font-bold uppercase tracking-wider text-white/40 ml-1",children:"Thai"}),(0,S.jsx)("textarea",{value:x,onChange:e=>g(e.target.value),className:"w-full rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-[16px] font-medium text-white focus:outline-none focus:border-[#60A5FA]/50 transition-colors min-h-[80px] resize-none",placeholder:"Thai text"})]}),(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("label",{className:"text-[11px] font-bold uppercase tracking-wider text-white/40 ml-1",children:"Burmese"}),(0,S.jsx)("textarea",{value:b,onChange:e=>y(e.target.value),className:"w-full rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-[16px] font-medium text-white focus:outline-none focus:border-[#60A5FA]/50 transition-colors min-h-[80px] resize-none",placeholder:"Burmese translation"})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("label",{className:"text-[11px] font-bold uppercase tracking-wider text-white/40 ml-1",children:"Category"}),(0,S.jsx)("input",{value:C,onChange:e=>M(e.target.value),list:"category-suggestions",className:"w-full rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-[15px] font-medium text-white focus:outline-none focus:border-[#60A5FA]/50 transition-colors",placeholder:"Category"}),(0,S.jsx)("datalist",{id:"category-suggestions",children:e2.map(e=>(0,S.jsx)("option",{value:e},e))})]}),(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("label",{className:"text-[11px] font-bold uppercase tracking-wider text-white/40 ml-1",children:"Count"}),(0,S.jsx)("input",{type:"number",value:w,onChange:e=>N(Number(e.target.value)),className:"w-full rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-[15px] font-medium text-white focus:outline-none focus:border-[#60A5FA]/50 transition-colors"})]})]}),(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("label",{className:"text-[11px] font-bold uppercase tracking-wider text-white/40 ml-1",children:"Status"}),(0,S.jsx)("div",{className:"flex gap-2 mb-2",children:["ready","queue","drill"].map(e=>(0,S.jsx)("button",{onClick:()=>E(e),className:`flex-1 py-3 rounded-xl border transition-all flex items-center justify-center ${v===e?"bg-white/20 border-white/40 shadow-[0_0_15px_rgba(255,255,255,0.15)]":"bg-white/5 border-white/10"}`,children:(0,S.jsx)("span",{className:"text-[28px]",children:"ready"===e?"ğŸ’":"queue"===e?"ğŸ˜®":"ğŸ”¥"})},e))})]}),(0,S.jsx)("button",{onClick:D,disabled:K,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-[#60A5FA] to-[#B36BFF] text-white font-black text-[16px] shadow-[0_12px_40px_rgba(96,165,250,0.3)] active:scale-[0.98] transition-all disabled:opacity-50",children:K?"Saving...":"Save Changes"})]})}):m?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"mx-auto w-full max-w-[90%] px-3 text-center -mt-[20px]",children:[(0,S.jsx)(_.AnimatePresence,{mode:"wait",initial:!1,children:(0,S.jsx)(j.motion.button,{type:"button",onClick:()=>{t(),e4(L,m?.id?`main-${m.id}`:"main")},disabled:!u||!m||ew,className:"bg-transparent font-semibold tracking-[-0.02em] transition-opacity whitespace-normal break-words leading-snug "+(P>32?"text-[24px] sm:text-[28px]":P>20?"text-[32px] sm:text-[36px]":"text-[42px] sm:text-[46px]")+" "+(ef===(m?.id?`main-${m.id}`:"main")?"opacity-75":"opacity-100")+(u&&m?"":" opacity-60"),initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{type:"spring",stiffness:260,damping:22,mass:.9},children:Array.from(L).map((e,t)=>(0,S.jsx)("span",{style:{color:e5[t%e5.length]},children:e},`${e}-${t}`))},m?.id??L)}),B?(0,S.jsx)("div",{className:"mt-1 text-[18px] sm:text-[20px] leading-relaxed font-semibold text-[#F5C542] whitespace-normal break-words",children:B}):null]}),(0,S.jsxs)("div",{className:"mt-3",children:[(0,S.jsxs)("div",{className:"flex items-start justify-between",children:[(0,S.jsx)("button",{type:"button",onClick:()=>void eQ(),disabled:!u||!m||K,"aria-label":"Change status",className:"flex h-[72px] w-[72px] items-center justify-center text-[53px] transition-opacity "+(u&&m?K?"opacity-55":"opacity-100":"opacity-35"),children:"ready"===eW?"ğŸ’":"queue"===eW?"ğŸ˜®":"ğŸ”¥"}),(0,S.jsx)("div",{className:"flex-1 text-center -mt-[20px]",children:(0,S.jsxs)("div",{className:"inline-flex items-start gap-2",children:[(0,S.jsxs)(j.motion.div,{initial:{scale:1,filter:"brightness(1)"},animate:ek>0?{scale:[1,1.15,1],filter:["brightness(1)","brightness(1.5)","brightness(1)"],textShadow:["0 0 0px rgba(255,255,255,0)","0 0 20px rgba(255,255,255,0.8)","0 0 0px rgba(255,255,255,0)"]}:{},transition:{duration:.3},className:"bg-gradient-to-r from-[#60A5FA] via-[#B36BFF] to-[#FF4D6D] bg-clip-text text-transparent text-[65px] sm:text-[76px] font-black leading-none tracking-[-0.04em] relative mt-[10px]",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:[eX.toLocaleString(),eU&&(0,S.jsx)("div",{className:"pointer-events-none absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50",children:(0,S.jsx)(_.AnimatePresence,{mode:"wait",children:(0,S.jsxs)(j.motion.div,{initial:{opacity:0,x:0,y:140,scale:.5,rotate:0},animate:{opacity:1,x:140,y:-50,scale:2.5,rotate:15},exit:{opacity:0,x:180,y:-110,scale:1.5,rotate:25},transition:{duration:1.2,ease:[.22,1,.36,1]},className:"font-black text-white drop-shadow-[0_0_12px_rgba(255,255,255,0.8)] whitespace-nowrap flex items-start",style:{fontSize:"24px"},children:[(0,S.jsx)("span",{className:"text-[12px] mt-[4px] mr-[1px]",children:"+"}),(0,S.jsx)("span",{children:eU.replace("+","")})]},eG)})})]},eX),(0,S.jsx)("div",{className:"pt-4 sm:pt-5 text-[20px] sm:text-[22px] font-semibold text-[#E6C24A]"})]})}),(0,S.jsxs)("div",{className:"flex w-[74px] flex-col items-center gap-3 mt-[0px]",children:[(0,S.jsx)("button",{type:"button","aria-label":"Plus",onClick:()=>{let e;t(),e=[1,2,5],V(t=>{let n=e.indexOf(t);return e[(n+1)%e.length]??5})},className:"h-[68px] w-[68px] rounded-full p-[3px] bg-white/20 backdrop-blur-sm shadow-[0_0_25px_rgba(255,122,0,0.3)] transition-transform active:scale-95 group",children:(0,S.jsxs)("div",{className:"h-full w-full rounded-full border-[3px] border-white/90 bg-gradient-to-br from-[#FF4D6D] via-[#FFB020] to-[#FF7A00] flex items-center justify-center relative overflow-hidden",children:[(0,S.jsx)("span",{className:"absolute top-[10px] left-[12px] text-[14px] font-black text-white/90",children:"+"}),(0,S.jsx)("span",{className:"text-[34px] font-black text-white leading-none tracking-tight translate-x-[2px]",children:q}),(0,S.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent pointer-events-none"})]})}),(0,S.jsxs)("button",{type:"button","aria-label":"Tap speak mode",onClick:e=>{e.stopPropagation();let t=["max","3","10","off"],n=t.indexOf(eE);var a=t[(n+1)%t.length]??"off";eC(a);try{localStorage.setItem(i,a)}catch{}if("off"===a){et(0);try{localStorage.setItem(s,"0")}catch{}}else if(0===ee){et(1);try{localStorage.setItem(s,"1")}catch{}}},className:"relative h-[42px] w-[42px] rounded-full border backdrop-blur-xl shadow-[0_18px_50px_rgba(0,0,0,0.25)] transition-all active:scale-90 z-40 "+("off"===eE?"border-white/20 bg-white/10":"border-white/45 bg-white/20"),children:[(0,S.jsx)("div",{className:"flex h-full w-full items-center justify-center text-[16px] text-white/80",children:"max"===eE?"ğŸ”Š":"3"===eE?"ğŸ”‰":"10"===eE?"ğŸ”ˆ":"ğŸ”‡"}),eJ?(0,S.jsx)("div",{className:"absolute -right-1 -bottom-1 h-[16px] min-w-[16px] rounded-full bg-white/90 px-1 text-[10px] font-semibold leading-[16px] text-black",children:eJ}):null]})]})]}),(0,S.jsx)("div",{className:"relative -mt-9 sm:-mt-10 flex items-center justify-center",children:(0,S.jsxs)("div",{className:"relative w-full max-w-[300px]",children:[(0,S.jsxs)(j.motion.div,{className:"relative w-full aspect-square rounded-full border-[6px] border-white/90 overflow-hidden shadow-[0_0_80px_rgba(96,165,250,0.5)]",role:"button",tabIndex:0,"aria-label":"Increment count",onClick:ez,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ez())},style:{background:"conic-gradient(from 0deg, #00F2FF, #006AFF, #7000FF, #FF00C8, #FF0032, #FF8A00, #00F2FF)"},whileTap:{scale:.94},animate:ek>0?{boxShadow:["0 0 80px rgba(96,165,250,0.5)","0 0 120px rgba(255,255,255,0.8)","0 0 80px rgba(96,165,250,0.5)"],filter:["brightness(1)","brightness(1.3)","brightness(1)"]}:{},transition:{duration:.4},children:[(0,S.jsx)(j.motion.div,{className:"absolute inset-0",animate:{rotate:[0,360]},transition:{duration:4,repeat:1/0,ease:"linear"},style:{background:"conic-gradient(from 0deg, transparent, rgba(255,255,255,0.5), transparent)"}}),(0,S.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/10 backdrop-blur-[2px]"}),(0,S.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-white/10 to-transparent"}),ek>0&&(0,S.jsx)(_.AnimatePresence,{children:(0,S.jsx)(j.motion.div,{className:"absolute inset-0 rounded-full border-4 border-white/40",initial:{scale:.9,opacity:.8},animate:{scale:2.2,opacity:0},transition:{duration:.5,ease:"easeOut"}},ek)}),(0,S.jsx)("div",{className:"absolute inset-0 overflow-visible pointer-events-none",children:eD.map(e=>(0,S.jsx)(_.AnimatePresence,{children:(0,S.jsx)(j.motion.span,{className:"absolute h-[12px] w-[12px] rounded-full",style:{backgroundColor:e.color,boxShadow:`0 0 25px ${e.color}`,filter:"blur(1px)"},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:2.8*e.x,y:2.8*e.y,opacity:0,scale:.3},transition:{duration:.9,ease:"easeOut"}})},e.id))})]}),(0,S.jsx)("div",{className:"absolute bottom-[5px] right-[5px] z-30",children:(0,S.jsx)("button",{type:"button","aria-label":"Minus",onClick:e=>{if(e.stopPropagation(),!u||!m||Q)return;let t=Math.max(0,W-q);X(t),J(t),e0(t)},disabled:!u||!m||Q,className:"h-[72px] w-[72px] sm:h-[82px] sm:w-[82px] rounded-full border-4 border-white/90 bg-gradient-to-br from-[#FF4D6D] via-[#FFB020] to-[#FF7A00] shadow-[0_0_25px_rgba(255,77,109,0.5)] active:scale-90 transition-transform flex items-center justify-center",children:(0,S.jsx)("div",{className:"text-[30px] sm:text-[36px] font-black text-white leading-none",children:"â†“"})})})]})}),(0,S.jsx)("div",{className:"mt-auto pt-5",children:(0,S.jsx)("div",{className:"w-full rounded-2xl border border-white/20 bg-black/40 px-4 py-3 backdrop-blur-2xl shadow-[0_18px_50px_rgba(0,0,0,0.50)]",children:(0,S.jsxs)("div",{className:"relative flex items-center justify-between text-[11px] font-semibold h-[60px] sm:h-[68px]",children:[(0,S.jsx)("div",{className:"z-10 text-white/60",children:"To Hit"}),(0,S.jsx)("div",{className:"z-10 text-white/45",children:"For Apr 7, 2025"}),(0,S.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,S.jsx)("div",{className:"text-[50px] sm:text-[60px] leading-none font-semibold bg-gradient-to-r from-[#60A5FA] via-[#B36BFF] to-[#FF4D6D] bg-clip-text text-transparent",children:"240"})})]})})}),e9&&(0,S.jsxs)("div",{className:"mt-4 w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-4 backdrop-blur-xl shadow-[0_18px_50px_rgba(0,0,0,0.30)] flex flex-col max-h-[70vh]",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between shrink-0",children:[(0,S.jsx)("button",{onClick:()=>f(!p),className:"text-[14px] font-semibold text-[#60A5FA] active:opacity-60",children:p?"Cancel":"Edit"}),!m?.ai_explanation&&m?.id?(0,S.jsx)("button",{type:"button",onClick:()=>{eo(null),ea(null),eu(m.id)},className:r,children:"Close"}):(0,S.jsx)("div",{className:"w-[72px]"})]}),(0,S.jsx)("div",{className:"mt-3 flex-1 overflow-y-auto pb-[100px]",children:m?.ai_explanation?(0,S.jsx)("div",{children:e6(String(m.ai_explanation))}):en?(0,S.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,S.jsx)("div",{className:"h-2 w-2 rounded-full bg-white/50 animate-pulse"}),(0,S.jsx)("div",{className:"h-2 w-2 rounded-full bg-white/50 animate-pulse [animation-delay:120ms]"}),(0,S.jsx)("div",{className:"h-2 w-2 rounded-full bg-white/50 animate-pulse [animation-delay:240ms]"}),(0,S.jsx)("div",{className:"ml-2 text-[13px] font-semibold text-white/60",children:"Generatingâ€¦"})]}):ei?(0,S.jsxs)("div",{className:"rounded-2xl border border-red-500/20 bg-red-500/10 px-4 py-3 text-[13px] font-semibold text-red-200",children:[ei,m?.id?(0,S.jsx)("button",{type:"button",onClick:()=>{eu(null),e3()},className:"mt-3 "+r,children:"Retry"}):null]}):er?(0,S.jsx)("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:e6(er)}):null}),m?.ai_explanation||en||ei||!er?null:(0,S.jsxs)("div",{className:"mt-3 flex items-center justify-end gap-2 shrink-0",children:[(0,S.jsx)("button",{type:"button",onClick:()=>{m?.id&&eu(m.id),eo(null),ea(null)},className:r,children:"Discard"}),(0,S.jsx)("button",{type:"button",onClick:()=>void e8(),disabled:eh,className:r+" bg-white/10 "+(eh?"opacity-60":"opacity-100"),children:eh?"Savingâ€¦":"Confirm & Save"})]})]})]})]}):(0,S.jsx)("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-[13px] font-semibold text-white/70 backdrop-blur-xl",children:c.length?"Word not found":"No words yet"}):(0,S.jsx)("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-[13px] font-semibold text-white/70 backdrop-blur-xl",children:"Sign in required"})}),(0,S.jsx)("div",{className:"mt-6 hidden",children:(0,S.jsx)(T.default,{href:"/",className:r,children:"Back"})})]})})})})}function eN(){return(0,S.jsx)(O.Suspense,{fallback:(0,S.jsx)("div",{className:"min-h-screen bg-[#0A0B0F] text-white",children:(0,S.jsx)("div",{className:"min-h-screen",style:{background:"radial-gradient(1200px 800px at 50% 10%, rgba(255,255,255,0.08), rgba(0,0,0,0) 55%), radial-gradient(900px 600px at 50% 60%, rgba(255,83,145,0.09), rgba(0,0,0,0) 60%), #0A0B0F"}})}),children:(0,S.jsx)(ew,{})})}e.s(["default",()=>eN],52)}]);