(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73884,97466,e=>{"use strict";var t=e.i(71645);e.i(51718);var r=e.i(18357),n=e.i(67426);e.i(36180);var i=e.i(98925);function s(e){return{id:e.id,thai:e.thai??"",burmese:e.burmese??null,count:Number.isFinite(Number(e.count))?Number(e.count):Number.isFinite(Number(e.hit))?Number(e.hit):0,status:e.status??"queue",category:e.category??null,updatedAt:function(e){if(!e)return 0;if("number"==typeof e&&Number.isFinite(e))return e;if(e instanceof Date)return e.getTime();if("function"==typeof e?.toMillis)try{let t=e.toMillis();return Number.isFinite(t)?t:0}catch{return 0}return"number"==typeof e?.seconds?Math.round(1e3*e.seconds+("number"==typeof e.nanoseconds?e.nanoseconds:0)/1e6):0}(e.updatedAt),ai_explanation:"string"==typeof e.ai_explanation?e.ai_explanation:null}}function o(e){return`users/${e}/vocab`}function u(e,t,r){let u=(0,n.getFirebaseDb)(),a=(0,i.collection)(u,o(e)),l=(0,i.query)(a,(0,i.orderBy)("updatedAt","desc"));return(0,i.onSnapshot)(l,{includeMetadataChanges:!0},e=>{t({items:e.docs.map(e=>e.data()).filter(e=>!!e&&"string"==typeof e.id).map(s),fromCache:e.metadata.fromCache})},e=>{r?.(e)})}async function a(e,t){let r=(0,n.getFirebaseDb)(),s=(0,i.doc)(r,o(e),t.id),u={...t,updatedAt:(0,i.serverTimestamp)()};await (0,i.setDoc)(s,u,{merge:!0})}async function l(e,t){let r=(0,n.getFirebaseDb)(),s=(0,i.doc)(r,"users",e);await (0,i.setDoc)(s,{...t,updatedAt:(0,i.serverTimestamp)()},{merge:!0})}async function c(e){let t=(0,n.getFirebaseDb)(),r=(0,i.doc)(t,"users",e),s=await (0,i.getDoc)(r);if(s.exists()){let e=s.data();return{dailyHitTarget:e.dailyHitTarget,studyStartDate:e.studyStartDate,googleAiApiKey:e.googleAiApiKey}}return null}async function f(e,t){let r=(0,n.getFirebaseDb)(),s=(0,i.doc)(r,o(e),t);await (0,i.deleteDoc)(s)}async function d(e,t){let r=(0,n.getFirebaseDb)(),u=(0,i.doc)(r,o(e),t),a=await (0,i.getDocFromServer)(u);return a.exists()?s(a.data()):null}async function m(e){let t=(0,n.getFirebaseDb)(),r=(0,i.collection)(t,o(e)),s=await (0,i.getDocs)(r);for(let e=0;e<s.docs.length;e+=450){let r=(0,i.writeBatch)(t);for(let t of s.docs.slice(e,e+450))r.delete(t.ref);await r.commit()}}async function p(e,t){let r=(0,n.getFirebaseDb)(),s=t.map(e=>({thai:(e.thai??"").trim(),burmese:(e.burmese??null)?.toString().trim()||null,category:(e.category??null)?.toString().trim()||null,count:Number.isFinite(Number(e.count))?Number(e.count):0,status:"drill"===String(e.status??"")||"ready"===String(e.status??"")?String(e.status):"queue"})).filter(e=>e.thai.length>0),u=null;for(let t=0;t<s.length;t+=450){let n=s.slice(t,t+450),a=(0,i.writeBatch)(r);for(let t of n){let n=globalThis.crypto?.randomUUID?.()??String(Date.now())+Math.random(),s=(0,i.doc)(r,o(e),String(n));u||(u=s.id),a.set(s,{id:s.id,thai:t.thai,burmese:t.burmese,count:t.count,status:t.status,category:t.category,updatedAt:(0,i.serverTimestamp)()},{merge:!0})}await a.commit()}return{importedCount:s.length,firstId:u}}function h(){let[e,i]=(0,t.useState)(null),[s,o]=(0,t.useState)(!1),[a,l]=(0,t.useState)(null),[c,f]=(0,t.useState)(null),[d,m]=(0,t.useState)(null),[p,h]=(0,t.useState)([]),[g,y]=(0,t.useState)(!0),[b,S]=(0,t.useState)(!0),[w,v]=(0,t.useState)(!0),[C,E]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(!n.isFirebaseConfigured){i(null),h([]),y(!1),S(!0);return}let e=(0,n.getFirebaseAuth)();i(e.currentUser?.uid??null),o(e.currentUser?.isAnonymous??!1),l(e.currentUser?.email??null),f(e.currentUser?.displayName??null),m(e.currentUser?.photoURL??null);let t=(0,r.onAuthStateChanged)(e,e=>{i(e?.uid??null),o(e?.isAnonymous??!1),l(e?.email??null),f(e?.displayName??null),m(e?.photoURL??null)});return()=>t()},[]),(0,t.useEffect)(()=>{let e=()=>v(!0),t=()=>v(!1);return v(navigator.onLine),window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,t.useEffect)(()=>{if(!e||s){h([]),y(!1),S(!0),E(null);return}y(!0),E(null);try{let t=u(e,e=>{h(e.items),S(e.fromCache),y(!1)},e=>{E(`${e.code??"firestore-error"}: ${e.message??""}`.trim()),h([]),S(!0),y(!1)});return()=>t()}catch(e){E(e?.message?String(e.message):"Failed to start Firestore listener."),h([]),S(!0),y(!1);return}},[e,s]);let x=w?g||b?"syncing":"live":"offline",D=!!e&&!s&&"live"===x;return(0,t.useMemo)(()=>({uid:e,isAnonymous:s,email:a,displayName:c,photoURL:d,items:p,loading:g,isLive:D,status:x,vocabError:C}),[e,s,a,c,d,p,g,D,x,C])}e.s(["clearVocabulary",()=>m,"deleteVocabulary",()=>f,"fetchVocabularyEntryFromServer",()=>d,"getUserSettings",()=>c,"importVocabularyRows",()=>p,"listenVocabulary",()=>u,"saveUserSettings",()=>l,"upsertVocabulary",()=>a],97466),e.s(["useVocabulary",()=>h],73884)},91499,e=>{"use strict";var t=e.i(71645);function r(){let e=(0,t.useRef)(null);return(0,t.useEffect)(()=>{e.current=new Audio("/sounds/tap.mp3"),e.current.load()},[]),(0,t.useCallback)(()=>{e.current&&(e.current.currentTime=0,e.current.play().catch(e=>{console.warn("Audio play blocked:",e)}))},[])}e.s(["useTapSound",()=>r])},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),n=e.i(31178),i=e.i(47414),s=e.i(74008),o=e.i(21476),u=e.i(72846),a=r,l=e.i(37806);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class f extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,u.isHTMLElement)(e)&&e.offsetWidth||0,n=(0,u.isHTMLElement)(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left,i.bottom=n-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:n,anchorX:i,anchorY:s,root:o}){let u=(0,a.useId)(),d=(0,a.useRef)(null),m=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=(0,a.useContext)(l.MotionConfigContext),h=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=c(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():c(e[t],null)}}}}(...e),e)}(d,e.props?.ref??e?.ref);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:a,right:l,bottom:c}=m.current;if(n||!d.current||!e||!t)return;let f="left"===i?`left: ${a}`:`right: ${l}`,h="bottom"===s?`bottom: ${c}`:`top: ${r}`;d.current.dataset.motionPopId=u;let g=document.createElement("style");p&&(g.nonce=p);let y=o??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${f}px !important;
            ${h}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[n]),(0,t.jsx)(f,{isPresent:n,childRef:d,sizeRef:m,children:a.cloneElement(e,{ref:h})})}let m=({children:e,initial:n,isPresent:s,onExitComplete:u,custom:a,presenceAffectsLayout:l,mode:c,anchorX:f,anchorY:m,root:h})=>{let g=(0,i.useConstant)(p),y=(0,r.useId)(),b=!0,S=(0,r.useMemo)(()=>(b=!1,{id:y,initial:n,isPresent:s,custom:a,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;u&&u()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[s,g,u]);return l&&b&&(S={...S}),(0,r.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[s]),r.useEffect(()=>{s||g.size||!u||u()},[s]),"popLayout"===c&&(e=(0,t.jsx)(d,{isPresent:s,anchorX:f,anchorY:m,root:h,children:e})),(0,t.jsx)(o.PresenceContext.Provider,{value:S,children:e})};function p(){return new Map}var h=e.i(64978);let g=e=>e.key||"";function y(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:o,initial:u=!0,onExitComplete:a,presenceAffectsLayout:l=!0,mode:c="sync",propagate:f=!1,anchorX:d="left",anchorY:p="top",root:b})=>{let[S,w]=(0,h.usePresence)(f),v=(0,r.useMemo)(()=>y(e),[e]),C=f&&!S?[]:v.map(g),E=(0,r.useRef)(!0),x=(0,r.useRef)(v),D=(0,i.useConstant)(()=>new Map),F=(0,r.useRef)(new Set),[A,T]=(0,r.useState)(v),[L,R]=(0,r.useState)(v);(0,s.useIsomorphicLayoutEffect)(()=>{E.current=!1,x.current=v;for(let e=0;e<L.length;e++){let t=g(L[e]);C.includes(t)?(D.delete(t),F.current.delete(t)):!0!==D.get(t)&&D.set(t,!1)}},[L,C.length,C.join("-")]);let I=[];if(v!==A){let e=[...v];for(let t=0;t<L.length;t++){let r=L[t],n=g(r);C.includes(n)||(e.splice(t,0,r),I.push(r))}return"wait"===c&&I.length&&(e=I),R(y(e)),T(v),null}let{forceRender:N}=(0,r.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:L.map(e=>{let r=g(e),n=(!f||!!S)&&(v===L||C.includes(r));return(0,t.jsx)(m,{isPresent:n,initial:(!E.current||!!u)&&void 0,custom:o,presenceAffectsLayout:l,mode:c,root:b,onExitComplete:n?void 0:()=>{if(F.current.has(r)||(F.current.add(r),!D.has(r)))return;D.set(r,!0);let e=!0;D.forEach(t=>{t||(e=!1)}),e&&(N?.(),R(x.current),f&&w?.(),a&&a())},anchorX:d,anchorY:p,children:e},r)})})};e.s(["AnimatePresence",()=>b],88653)},9257,e=>{"use strict";var t=e.i(71645);let r="sar-kyat-study-history",n="sar-kyat-study-start-date",i="sar-kyat-daily-hit-target";function s(){let[e,s]=(0,t.useState)({}),[o,u]=(0,t.useState)(""),[a,l]=(0,t.useState)(5e3);(0,t.useEffect)(()=>{let e=localStorage.getItem(r);if(e)try{s(JSON.parse(e))}catch(e){console.error("Failed to parse history",e)}let t=localStorage.getItem(n);t||(t=new Date().toISOString().split("T")[0],localStorage.setItem(n,t)),u(t);let o=localStorage.getItem(i);o&&l(parseInt(o,10))},[]),(0,t.useEffect)(()=>{let e=e=>{e.key===i&&e.newValue&&l(parseInt(e.newValue,10))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let c=(0,t.useCallback)(e=>{let t=new Date().toISOString().split("T")[0];s(n=>{let i={...n};return i[t]=(i[t]||0)+e,localStorage.setItem(r,JSON.stringify(i)),i})},[]),f=(0,t.useCallback)(t=>e[t]||0,[e]);return{history:e,startDate:o,dailyTarget:a,addHits:c,getHits:f}}e.s(["useStudyHistory",()=>s])}]);