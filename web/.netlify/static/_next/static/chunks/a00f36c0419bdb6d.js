(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73884,97466,e=>{"use strict";var t=e.i(71645);e.i(51718);var r=e.i(18357),a=e.i(67426);e.i(36180);var s=e.i(98925);function n(e){return{id:e.id,thai:e.thai??"",burmese:e.burmese??null,count:Number.isFinite(Number(e.count))?Number(e.count):Number.isFinite(Number(e.hit))?Number(e.hit):0,status:e.status??"queue",category:e.category??null,updatedAt:function(e){if(!e)return 0;if("number"==typeof e&&Number.isFinite(e))return e;if(e instanceof Date)return e.getTime();if("function"==typeof e?.toMillis)try{let t=e.toMillis();return Number.isFinite(t)?t:0}catch{return 0}return"number"==typeof e?.seconds?Math.round(1e3*e.seconds+("number"==typeof e.nanoseconds?e.nanoseconds:0)/1e6):0}(e.updatedAt),ai_explanation:"string"==typeof e.ai_explanation?e.ai_explanation:null}}function i(e){return`users/${e}/vocab`}function l(e,t,r){let l=(0,a.getFirebaseDb)(),o=(0,s.collection)(l,i(e)),c=(0,s.query)(o,(0,s.orderBy)("updatedAt","desc"));return(0,s.onSnapshot)(c,{includeMetadataChanges:!0},e=>{t({items:e.docs.map(e=>e.data()).filter(e=>!!e&&"string"==typeof e.id).map(n),fromCache:e.metadata.fromCache})},e=>{r?.(e)})}async function o(e,t){let r=(0,a.getFirebaseDb)(),n=(0,s.doc)(r,i(e),t.id),l={...t,updatedAt:(0,s.serverTimestamp)()};await (0,s.setDoc)(n,l,{merge:!0})}async function c(e,t){let r=(0,a.getFirebaseDb)(),n=(0,s.doc)(r,"users",e);await (0,s.setDoc)(n,{...t,updatedAt:(0,s.serverTimestamp)()},{merge:!0})}async function d(e){let t=(0,a.getFirebaseDb)(),r=(0,s.doc)(t,"users",e),n=await (0,s.getDoc)(r);if(n.exists()){let e=n.data();return{dailyHitTarget:e.dailyHitTarget,studyStartDate:e.studyStartDate,googleAiApiKey:e.googleAiApiKey}}return null}async function u(e,t){let r=(0,a.getFirebaseDb)(),n=(0,s.doc)(r,i(e),t);await (0,s.deleteDoc)(n)}async function x(e,t){let r=(0,a.getFirebaseDb)(),l=(0,s.doc)(r,i(e),t),o=await (0,s.getDocFromServer)(l);return o.exists()?n(o.data()):null}async function m(e){let t=(0,a.getFirebaseDb)(),r=(0,s.collection)(t,i(e)),n=await (0,s.getDocs)(r);for(let e=0;e<n.docs.length;e+=450){let r=(0,s.writeBatch)(t);for(let t of n.docs.slice(e,e+450))r.delete(t.ref);await r.commit()}}async function p(e,t){let r=(0,a.getFirebaseDb)(),n=t.map(e=>({thai:(e.thai??"").trim(),burmese:(e.burmese??null)?.toString().trim()||null,category:(e.category??null)?.toString().trim()||null,count:Number.isFinite(Number(e.count))?Number(e.count):0,status:"drill"===String(e.status??"")||"ready"===String(e.status??"")?String(e.status):"queue"})).filter(e=>e.thai.length>0),l=null;for(let t=0;t<n.length;t+=450){let a=n.slice(t,t+450),o=(0,s.writeBatch)(r);for(let t of a){let a=globalThis.crypto?.randomUUID?.()??String(Date.now())+Math.random(),n=(0,s.doc)(r,i(e),String(a));l||(l=n.id),o.set(n,{id:n.id,thai:t.thai,burmese:t.burmese,count:t.count,status:t.status,category:t.category,updatedAt:(0,s.serverTimestamp)()},{merge:!0})}await o.commit()}return{importedCount:n.length,firstId:l}}function b(){let[e,s]=(0,t.useState)(null),[n,i]=(0,t.useState)(!1),[o,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null),[x,m]=(0,t.useState)(null),[p,b]=(0,t.useState)([]),[f,h]=(0,t.useState)(!0),[g,v]=(0,t.useState)(!0),[w,j]=(0,t.useState)(!0),[y,N]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(!a.isFirebaseConfigured){s(null),b([]),h(!1),v(!0);return}let e=(0,a.getFirebaseAuth)();s(e.currentUser?.uid??null),i(e.currentUser?.isAnonymous??!1),c(e.currentUser?.email??null),u(e.currentUser?.displayName??null),m(e.currentUser?.photoURL??null);let t=(0,r.onAuthStateChanged)(e,e=>{s(e?.uid??null),i(e?.isAnonymous??!1),c(e?.email??null),u(e?.displayName??null),m(e?.photoURL??null)});return()=>t()},[]),(0,t.useEffect)(()=>{let e=()=>j(!0),t=()=>j(!1);return j(navigator.onLine),window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,t.useEffect)(()=>{if(!e||n){b([]),h(!1),v(!0),N(null);return}h(!0),N(null);try{let t=l(e,e=>{b(e.items),v(e.fromCache),h(!1)},e=>{N(`${e.code??"firestore-error"}: ${e.message??""}`.trim()),b([]),v(!0),h(!1)});return()=>t()}catch(e){N(e?.message?String(e.message):"Failed to start Firestore listener."),b([]),v(!0),h(!1);return}},[e,n]);let S=w?f||g?"syncing":"live":"offline",F=!!e&&!n&&"live"===S;return(0,t.useMemo)(()=>({uid:e,isAnonymous:n,email:o,displayName:d,photoURL:x,items:p,loading:f,isLive:F,status:S,vocabError:y}),[e,n,o,d,x,p,f,F,S,y])}e.s(["clearVocabulary",()=>m,"deleteVocabulary",()=>u,"fetchVocabularyEntryFromServer",()=>x,"getUserSettings",()=>d,"importVocabularyRows",()=>p,"listenVocabulary",()=>l,"saveUserSettings",()=>c,"upsertVocabulary",()=>o],97466),e.s(["useVocabulary",()=>b],73884)},91499,e=>{"use strict";var t=e.i(71645);function r(){let e=(0,t.useRef)(null);return(0,t.useEffect)(()=>{e.current=new Audio("/sounds/tap.mp3"),e.current.load()},[]),(0,t.useCallback)(()=>{e.current&&(e.current.currentTime=0,e.current.play().catch(e=>{console.warn("Audio play blocked:",e)}))},[])}e.s(["useTapSound",()=>r])},13399,e=>{"use strict";var t=e.i(43476),r=e.i(22016),a=e.i(71645),s=e.i(46932);e.i(51718);var n=e.i(18357),i=e.i(67426),l=e.i(73884),o=e.i(91499),c=e.i(97466),d=e.i(18566);function u(){let e=(0,d.useRouter)(),{uid:u,isAnonymous:x,email:m,displayName:p,photoURL:b,loading:f,status:h}=(0,l.useVocabulary)(),g=(0,o.useTapSound)(),[v,w]=(0,a.useState)(!1),j=(0,a.useRef)(null),[y,N]=(0,a.useState)(()=>new Date),[S,F]=(0,a.useState)(""),[k,D]=(0,a.useState)(!1),[A,B]=(0,a.useState)(null),[E,C]=(0,a.useState)(null),U=(0,a.useMemo)(()=>i.firebaseApp?{projectId:i.firebaseApp.options.projectId??null,authDomain:i.firebaseApp.options.authDomain??null}:null,[]);(0,a.useEffect)(()=>{f||u&&!x||e.replace("/login")},[f,u,x,e]),(0,a.useEffect)(()=>{!u||x||(async()=>{let e=await (0,c.getUserSettings)(u);e?(e.dailyHitTarget?B(e.dailyHitTarget):B(5e3),e.studyStartDate?C(e.studyStartDate):C("2024-03-01"),e.googleAiApiKey&&F(e.googleAiApiKey)):(B(5e3),C("2024-03-01"))})()},[u,x]),(0,a.useEffect)(()=>{u&&!x&&null!==A&&(0,c.saveUserSettings)(u,{dailyHitTarget:A})},[u,x,A]),(0,a.useEffect)(()=>{u&&!x&&null!==E&&(0,c.saveUserSettings)(u,{studyStartDate:E})},[u,x,E]),(0,a.useEffect)(()=>{u&&!x&&(0,c.saveUserSettings)(u,{googleAiApiKey:S})},[u,x,S]);let T="sar-kyat-google-ai-api-key";(0,a.useEffect)(()=>{try{S?localStorage.setItem(T,S):localStorage.removeItem(T)}catch{}},[S]),(0,a.useEffect)(()=>{let e=window.setInterval(()=>N(new Date),1e3);return()=>window.clearInterval(e)},[]),(0,a.useEffect)(()=>{if(!v)return;let e=e=>{let t=e.target;!t||j.current?.contains(t)||w(!1)},t=e=>{"Escape"===e.key&&w(!1)};return window.addEventListener("mousedown",e),window.addEventListener("touchstart",e,{passive:!0}),window.addEventListener("keydown",t),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("touchstart",e),window.removeEventListener("keydown",t)}},[v]);let I=async()=>{g();try{let t=(0,i.getFirebaseAuth)();await (0,n.signOut)(t),e.replace("/login")}catch(e){console.error("Sign out error:",e)}},L=`${String(y.getHours()).padStart(2,"0")}:${String(y.getMinutes()).padStart(2,"0")}:${String(y.getSeconds()).padStart(2,"0")}`,_=!!u&&!x;return(0,t.jsx)("div",{className:"min-h-screen bg-[#0A0B0F] text-white",children:(0,t.jsx)("div",{className:"min-h-screen",style:{background:"radial-gradient(1200px 800px at 50% 10%, rgba(255,255,255,0.08), rgba(0,0,0,0) 55%), radial-gradient(900px 600px at 50% 60%, rgba(255,83,145,0.09), rgba(0,0,0,0) 60%), #0A0B0F"},children:(0,t.jsxs)("div",{className:"mx-auto w-full max-w-md px-4 pt-[calc(env(safe-area-inset-top)+20px)] pb-[calc(env(safe-area-inset-bottom)+118px)]",children:[(0,t.jsxs)("header",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)(r.default,{href:"/",className:"rounded-full bg-[var(--surface)]/80 px-4 py-2 text-[13px] font-semibold text-[color:var(--foreground)] backdrop-blur-xl border border-[color:var(--border)] shadow-sm hover:shadow-md transition-shadow",children:"Back"}),(0,t.jsx)("div",{className:"text-[17px] font-bold tracking-tight",children:"Settings"}),(0,t.jsx)("div",{className:"w-[60px]"})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-1 mb-3",children:[(0,t.jsx)("h2",{className:"text-[14px] font-bold uppercase tracking-wider text-[#60A5FA]",children:"Account"}),_&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(s.motion.div,{animate:{opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0},className:"h-2 w-2 rounded-full bg-[#2CE08B] shadow-[0_0_8px_#2CE08B]"}),(0,t.jsx)("span",{className:"text-[11px] font-bold text-[#2CE08B] tracking-wide uppercase",children:"LIVE"})]})]}),(0,t.jsx)("div",{className:"rounded-[24px] bg-[var(--card)] p-5 shadow-[0_12px_40px_rgba(0,0,0,0.12)] border border-[color:var(--border)] backdrop-blur-3xl",children:_?(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"h-20 w-20 rounded-full overflow-hidden border-2 border-white/20 bg-[var(--surface)] shadow-[0_0_20px_rgba(255,255,255,0.15)]",children:b?(0,t.jsx)("img",{src:b,alt:"",referrerPolicy:"no-referrer",className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center text-[24px] font-bold",children:(p??m??"U").slice(0,1).toUpperCase()})}),(0,t.jsx)(s.motion.div,{className:"absolute -bottom-1 -right-1 h-6 w-6 rounded-full bg-[#2CE08B] border-2 border-[var(--card)] shadow-sm flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:10},children:(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-white animate-pulse"})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,t.jsx)("h3",{className:"text-[18px] font-bold tracking-tight truncate",children:p??"Peter Soe Moe"}),(0,t.jsx)("div",{className:"px-2 py-0.5 rounded-full bg-gradient-to-r from-[#60A5FA] via-[#B36BFF] to-[#FF4D6D] text-[9px] font-black text-white uppercase tracking-wider shadow-sm",children:"PRO"})]}),(0,t.jsx)("p",{className:"text-[13px] font-medium text-[color:var(--muted)] truncate",children:m??"peter@example.com"}),(0,t.jsx)("button",{onClick:()=>void I(),className:"mt-3 text-[12px] font-bold text-[#FF4D6D] hover:opacity-80 transition-opacity",children:"Sign Out"})]})]}):(0,t.jsxs)("div",{className:"text-center py-2",children:[(0,t.jsx)("p",{className:"text-[14px] font-bold text-[color:var(--muted-strong)]",children:"Sign in required"}),(0,t.jsx)("p",{className:"text-[12px] font-medium text-[color:var(--muted)] mt-1",children:"Unlock pro features to sync data"})]})})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-[14px] font-bold uppercase tracking-wider text-[#B36BFF] px-1 mb-3",children:"Learning Goal"}),(0,t.jsx)("div",{className:"rounded-[24px] bg-[var(--card)] p-5 border border-[color:var(--border)] backdrop-blur-3xl",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-2xl bg-[#B36BFF]/10 flex items-center justify-center text-[20px]",children:"ðŸŽ¯"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-[15px] font-bold tracking-tight",children:"Daily Hit Target"}),(0,t.jsx)("p",{className:"text-[11px] font-bold text-[color:var(--muted)] uppercase tracking-wide",children:"Hits per day"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{B(e=>Math.max(0,(e??5e3)-100))},className:"h-10 w-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-[20px] font-bold active:scale-90 transition-all",children:"-"}),(0,t.jsx)("div",{className:"w-24 text-center",children:(0,t.jsx)("span",{className:"text-[20px] font-black text-[#B36BFF] tabular-nums",children:(A??5e3).toLocaleString()})}),(0,t.jsx)("button",{type:"button",onClick:()=>{B(e=>(e??5e3)+100)},className:"h-10 w-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-[20px] font-bold active:scale-90 transition-all",children:"+"})]})]})}),(0,t.jsx)("div",{className:"mt-4 rounded-[24px] bg-[var(--card)] p-5 border border-[color:var(--border)] backdrop-blur-3xl",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-2xl bg-[#FFB020]/10 flex items-center justify-center text-[20px]",children:"ðŸ“…"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-[15px] font-bold tracking-tight",children:"Starting Date"}),(0,t.jsx)("p",{className:"text-[11px] font-bold text-[color:var(--muted)] uppercase tracking-wide",children:"Backdate progress"})]})]}),(0,t.jsx)("input",{type:"date",value:E??"2024-03-01",onChange:e=>C(e.target.value),className:"rounded-xl bg-black/20 px-3 py-2 text-right text-[14px] font-black text-[#FFB020] border border-white/5 focus:outline-none focus:border-[#FFB020]/50 transition-all [color-scheme:dark]"})]})})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-[14px] font-bold uppercase tracking-wider text-[#B36BFF] px-1 mb-3",children:"Tools"}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)(r.default,{href:"/settings/import",className:"flex items-center justify-between rounded-2xl bg-[var(--surface)]/70 px-5 py-4 text-[15px] font-bold text-[color:var(--foreground)] border border-[color:var(--border)] backdrop-blur-xl shadow-sm hover:shadow-md transition-all group active:scale-[0.98]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-xl bg-[#B36BFF]/10 flex items-center justify-center text-[16px]",children:"ðŸ“¥"}),(0,t.jsx)("span",{children:"Import CSV"})]}),(0,t.jsx)("span",{className:"text-[20px] text-[color:var(--muted)] group-hover:translate-x-0.5 transition-transform",children:"â€º"})]})})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-[14px] font-bold uppercase tracking-wider text-[#FF4D6D] px-1 mb-3",children:"AI Intelligence"}),(0,t.jsxs)("div",{className:"rounded-[24px] bg-[var(--card)] p-5 shadow-[0_12px_40px_rgba(0,0,0,0.12)] border border-[color:var(--border)] backdrop-blur-3xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-2xl bg-[#FF4D6D]/10 flex items-center justify-center text-[20px]",children:"âœ¨"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-[15px] font-bold tracking-tight",children:"Google AI Studio"}),(0,t.jsx)("p",{className:"text-[11px] font-bold text-[color:var(--muted)] uppercase tracking-wide",children:"On-Device Storage"})]})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("input",{value:S,onChange:e=>F(e.target.value),type:k?"text":"password",placeholder:"Paste API Key here...",className:"w-full rounded-2xl bg-black/20 px-4 py-4 text-[14px] font-bold text-[color:var(--foreground)] placeholder:text-[color:var(--muted)] border border-white/5 backdrop-blur-xl shadow-inner focus:outline-none focus:border-[#FF4D6D]/50 transition-all",autoCapitalize:"none",autoCorrect:"off",spellCheck:!1}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-2xl pointer-events-none border border-transparent group-focus-within:border-[#FF4D6D]/30 group-focus-within:animate-pulse transition-all"}),(0,t.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:(0,t.jsx)("button",{type:"button",onClick:()=>D(e=>!e),className:"px-4 py-2 rounded-xl bg-gradient-to-r from-[#FF4D6D] to-[#FFB020] text-[11px] font-black text-white uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:k?"Hide":"Show"})})]}),(0,t.jsx)("p",{className:"mt-3 text-[11px] font-medium text-[color:var(--muted)] px-1 leading-relaxed",children:"Your key is used to generate smart explanations for vocabularies."})]})]}),_&&U&&(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-[14px] font-bold uppercase tracking-wider text-[#FFB020] px-1 mb-3",children:"System"}),(0,t.jsx)("div",{className:"rounded-[24px] bg-[var(--surface)]/40 p-5 border border-[color:var(--border)] backdrop-blur-xl",children:(0,t.jsxs)("div",{className:"space-y-3 text-[12px] font-bold",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-white/5",children:[(0,t.jsx)("span",{className:"text-[color:var(--muted)]",children:"Project ID"}),(0,t.jsx)("span",{className:"text-[color:var(--foreground)]",children:U.projectId})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-[color:var(--muted)]",children:"UID"}),(0,t.jsxs)("span",{className:"text-[color:var(--foreground)] tabular-nums",children:[u.slice(0,8),"..."]})]})]})})]}),(0,t.jsxs)("div",{className:"text-center opacity-40",children:[(0,t.jsx)("p",{className:"text-[10px] font-black tracking-widest uppercase",children:"Sar Kyat Pro v2.0"}),(0,t.jsx)("div",{className:"mt-2 flex justify-center gap-1.5 tabular-nums text-[10px] font-bold",children:(0,t.jsx)("span",{children:L})})]})]})})})}e.s(["default",()=>u])}]);